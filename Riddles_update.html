<meta charset="utf-8">
<script type="text/javascript">


	//>> Загадайка. Программа содержит несколько интересных логических загадок, которые и предстоит разгадать игроку <<


	/*ФУНКЦИИ*/
	function giveMeRiddle(riddlesCount,riddlesList,correctAnswersCount){ //ПРОГРАММА. Далее реализуем функцию, задающую загадки, добавим возможность перехода к следующей по запросу "next"
		for (var correctIndex = 0; correctIndex < riddlesCount; correctIndex++) { //Используем вложенный цикл для прогонки каждой задачки
			while (userAnswer != riddlesList[correctIndex][1]||riddlesList[correctIndex][2]) { //Условие перехода на внешний цикл for представляет собой сравнение ответа игрока с массивом правильных ответов
				tryCount++; //В начале и на переходе на каждую новую операцию инкрементировать значение попыток
				alert("Загадка: " + riddlesList[correctIndex][0]); //Окно вывода загадки по индексу двумерного массива
				userAnswer = prompt("Твой ответ: ").toLowerCase(); //Здесь присваиваем ответ игрока. Вне зависимости от регистра КАПСОМ или строчными будем его сравнивать с правильным, используя метод .toLowerCase()
					if (userAnswer == riddlesList[correctIndex][1]||userAnswer == riddlesList[correctIndex][2]) { //Сравниваем ответ пользователя с правильными ответами
						correctAnswersCount++ //Поскольку игрок выдал правильный ответ, засчитываем его
						alert(`Ответ "${userAnswer}" совершенно верный! Кол-во попыток: ${tryCount}; общее кол-во угаданных загадок: ${correctAnswersCount} из ${riddlesCount}. Переходим к следующей!`) 
						break
						//Вывод сообщения игроку, что ответ правильный и краткие подытоги раунда
					} else if (userAnswer == "next") {
						alert("Вы пропустили эту загадку, переходим к следующей.") //Реализация пропуска текущей загадки
						break //Выход из цикла для перехода к следующей загадке
					} else {
						alert("Неверно. Попробуй ещё раз! Если слишком сложно, пропусти, прописав в ответ 'next' без кавычек."); //Вывод сообщения игроку, что этот ответ неверный
					}	
			}
		}
	return correctAnswersCount //В такой реализации функции достаточно возвращать кол-во верных ответов
	}


	function theResults(correctAnswersCount,riddlesCount){ 
		if (correctAnswersCount < riddlesCount/2) { //Поскольку мы в будущем можем увеличить кол-во загадок, сделаем условный задел на минимальный порог
			alert(`К сожалению, вы разгадали всего ${correctAnswersCount} из ${riddlesCount} загадок. Это очень мало. Приходите еще!`)
		} else if (correctAnswersCount == riddlesCount) { //Условие, когда все загадки разгаданы
			alert(`Ты великий Гуру загадок! Угадано ${correctAnswersCount} из ${riddlesCount} загадок! Забегай ещё!`)
		} else { //Соответственно, иначе игрок справился, но не идеально
			alert(`Почти все загадки были разгаданы, а именно ${correctAnswersCount} из ${riddlesCount}. Это отличный результат, но в следующий раз обязательно целься на большее! Ждём!`)
		}
	}


	/*ПЕРЕМЕННЫЕ*/
	var tryCount = 0; //Счетчик кол-ва любых попыток игрока
	var correctAnswersCount = 0; //Счетчик кол-ва верных попыток игрока
	var userAnswer = ''; //Нынеший ответ пользователя
	var riddlesList = [
	["Можно завязать, но невозможно развязать. Что это?","разговор","разговоры"],
	["Бегут, ходят, лежат или висят. Что это за предмет?","часы","часики"], 
	["Странный дождь порой идёт, сотни струй он кверху бьёт. Что это?","фонтан","гейзер"],
	["Что принадлежит тебе, однако, другие пользуются этим всё равно чаще?","имя","отчество"], 
	["Какое колесо не крутится при развороте на машине влево?","запасное","запаска"] //Коллекция загадок. Опять же, можно в будущем сделать уровни сложности
	];
	var riddlesCount = riddlesList.length //На будущую модернизацию! Общее кол-во загадок в массиве

	/*ПРОГРАММА*/
	correctAnswersCount=giveMeRiddle(riddlesCount,riddlesList,correctAnswersCount)
	alert("Увы, на сегодня загадок больше нет. А теперь подведём итоги!")
	theResults(correctAnswersCount,riddlesCount) //Подводим итоги игры с помощью универсальной функции


</script>